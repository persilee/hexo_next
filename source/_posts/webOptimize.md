---
title: å‰ç«¯æ€§èƒ½ä¼˜åŒ–
tags:
  - æ€§èƒ½ä¼˜åŒ–
  - web
copyright: true
comments: true
date: 2018-05-10 12:55:59
categories: æ€§èƒ½
top: 107
photos:
---

{% fi https://cdn.lishaoy.net/webOptimize/Optimize.png, web optimize, web optimize %}

å…³äº **æ€§èƒ½ä¼˜åŒ–** æ˜¯ä¸ªå¤§çš„é¢ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦æ¶‰åŠåˆ° **å‰ç«¯** çš„å‡ ä¸ªç‚¹ï¼Œå¦‚ **å‰ç«¯æ€§èƒ½ä¼˜åŒ–** çš„æµç¨‹ã€å¸¸è§æŠ€æœ¯æ‰‹æ®µã€å·¥å…·ç­‰ã€‚

æåŠ **å‰ç«¯æ€§èƒ½ä¼˜åŒ–** ï¼Œå¤§å®¶åº”è¯¥éƒ½ä¼šæƒ³åˆ° **é›…è™å†›è§„**ï¼Œæœ¬æ–‡ä¼šç»“åˆ **é›…è™å†›è§„** èå…¥è‡ªå·±çš„äº†è§£çŸ¥è¯†ï¼Œè¿›è¡Œçš„æ€»ç»“å’Œæ¢³ç† ğŸ˜œ

<!-- more -->

é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ ğŸ‘€ **é›…è™å†›è§„** çš„ **35** æ¡ã€‚

{% note info %} 
1. å°½é‡å‡å°‘ **HTTP** è¯·æ±‚ä¸ªæ•°â€”â€”é¡»æƒè¡¡
2. ä½¿ç”¨ **CDN**ï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰
3. ä¸ºæ–‡ä»¶å¤´æŒ‡å®š `Expires` æˆ– `Cache-Control` ï¼Œä½¿å†…å®¹å…·æœ‰ç¼“å­˜æ€§ã€‚
4. é¿å…ç©ºçš„ `src` å’Œ `href`
5. ä½¿ç”¨ `gzip` å‹ç¼©å†…å®¹
6. æŠŠ `CSS` æ”¾åˆ°é¡¶éƒ¨
7. æŠŠ `JS` æ”¾åˆ°åº•éƒ¨
8. é¿å…ä½¿ç”¨ `CSS` è¡¨è¾¾å¼
9. å°† `CSS` å’Œ `JS` æ”¾åˆ°å¤–éƒ¨æ–‡ä»¶ä¸­
10. å‡å°‘ **DNS** æŸ¥æ‰¾æ¬¡æ•°
11. ç²¾ç®€ `CSS` å’Œ `JS`
12. é¿å…è·³è½¬
13. å‰”é™¤é‡å¤çš„ `JS` å’Œ `CSS`
14. é…ç½® **ETags**
15. ä½¿ **AJAX** å¯ç¼“å­˜
16. å°½æ—©åˆ·æ–°è¾“å‡ºç¼“å†²
17. ä½¿ç”¨ **GET** æ¥å®Œæˆ **AJAX** è¯·æ±‚
18. å»¶è¿ŸåŠ è½½
19. é¢„åŠ è½½
20. å‡å°‘ **DOM** å…ƒç´ ä¸ªæ•°
21. æ ¹æ®åŸŸååˆ’åˆ†é¡µé¢å†…å®¹
22. å°½é‡å‡å°‘ `iframe` çš„ä¸ªæ•°
23. é¿å… **404**
24. å‡å°‘ `Cookie` çš„å¤§å°
25. ä½¿ç”¨æ—  `cookie` çš„åŸŸ
26. å‡å°‘ **DOM** è®¿é—®
27. å¼€å‘æ™ºèƒ½äº‹ä»¶å¤„ç†ç¨‹åº
28. ç”¨ `<link>` ä»£æ›¿ `@import`
29. é¿å…ä½¿ç”¨æ»¤é•œ
30. ä¼˜åŒ–å›¾åƒ
31. ä¼˜åŒ– `CSS Spirite`
32. ä¸è¦åœ¨ `HTML` ä¸­ç¼©æ”¾å›¾åƒâ€”â€”é¡»æƒè¡¡
33. favicon.icoè¦å°è€Œä¸”å¯ç¼“å­˜
34. ä¿æŒå•ä¸ªå†…å®¹å°äº25K
35. æ‰“åŒ…ç»„ä»¶æˆå¤åˆæ–‡æœ¬
{% endnote %}  

å¦‚å¯¹ **é›…è™å†›è§„** çš„å…·ä½“ç»†åˆ™å†…å®¹ä¸æ˜¯å¾ˆäº†è§£ï¼Œå¯è‡ªè¡Œå»å„æœç´¢ ğŸ” å¼•æ“ ï¼Œæœç´¢ **é›…è™å†›è§„** äº†è§£è¯¦æƒ…ã€‚

### å‹ç¼© åˆå¹¶

å¯¹äº **å‰ç«¯æ€§èƒ½ä¼˜åŒ–** è‡ªç„¶è¦å…³æ³¨ **é¦–å±** æ‰“å¼€é€Ÿåº¦ï¼Œè€Œè¿™ä¸ªé€Ÿåº¦ï¼Œå¾ˆå¤§å› ç´ æ˜¯èŠ±è´¹åœ¨ç½‘ç»œè¯·æ±‚ä¸Šï¼Œé‚£ä¹ˆæ€ä¹ˆå‡å°‘ç½‘ç»œè¯·æ±‚çš„æ—¶é—´å‘¢ï¼Ÿ

- å‡å°‘ç½‘ç»œè¯·æ±‚æ¬¡æ•° 
- å‡å°æ–‡ä»¶ä½“ç§¯
- ä½¿ç”¨ `CDN` åŠ é€Ÿ

æ‰€ä»¥ **å‹ç¼©ã€åˆå¹¶** å°±æ˜¯ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå½“ç„¶å¯ä»¥ç”¨ `gulp` ã€ `webpack` ã€ `grunt` ç­‰æ„å»ºå·¥å…· **å‹ç¼©ã€åˆå¹¶**

#### `JSã€CSS` å‹ç¼© åˆå¹¶

ä¾‹å¦‚ï¼š`gulp jsã€css` å‹ç¼©ã€åˆå¹¶ä»£ç å¦‚ä¸‹ ğŸ‘‡

```javascript javascript https://lishaoy.net/webOptimize.html gulpfile.js
//å‹ç¼©ã€åˆå¹¶js
gulp.task('scripts', function () {
    return gulp.src([
        './public/lib/fastclick/lib/fastclick.min.js',
        './public/lib/jquery_lazyload/jquery.lazyload.js',
        './public/lib/velocity/velocity.min.js',
        './public/lib/velocity/velocity.ui.min.js',
        './public/lib/fancybox/source/jquery.fancybox.pack.js',
        './public/js/src/utils.js',
        './public/js/src/motion.js',
        './public/js/src/scrollspy.js',
        './public/js/src/post-details.js',
        './public/js/src/bootstrap.js',
        './public/js/src/push.js',
        './public/live2dw/js/perTips.js',
        './public/live2dw/lib/L2Dwidget.min.js',
        './public/js/src/love.js',
        './public/js/src/busuanzi.pure.mini.js',
        './public/js/src/activate-power-mode.js'
    ]).pipe(concat('all.js')).pipe(minify()).pipe(gulp.dest('./public/dist/'));
});

// å‹ç¼©ã€åˆå¹¶ CSS 
gulp.task('css', function () {
    return gulp.src([
        './public/lib/font-awesome/css/font-awesome.min.css',
        './public/lib/fancybox/source/jquery.fancybox.css',
        './public/css/main.css',
        './public/css/lib.css',
        './public/live2dw/css/perTips.css'
    ]).pipe(concat('all.css')).pipe(minify()).pipe(gulp.dest('./public/dist/'));
});
```
ç„¶åï¼Œå†æŠŠ **å‹ç¼©ã€åˆå¹¶** çš„ `JSã€CSS` æ”¾å…¥ `CDN` , ğŸ‘€ çœ‹çœ‹æ•ˆæœå¦‚ä½•

å¦‚å›¾ï¼š* **å‹ç¼©ã€åˆå¹¶** ä¸”æ”¾å…¥ `CND` ä¹‹åçš„æ•ˆæœ *

<img src="https://cdn.lishaoy.net/webOptimize/concatJs.png" alt="Netlity" width="100%" title="é¦–é¡µè¯·æ±‚é€Ÿåº¦(js)" align="center" />

<img src="https://cdn.lishaoy.net/webOptimize/concatCss.png" alt="Netlity" width="100%" title="é¦–é¡µè¯·æ±‚é€Ÿåº¦(css)" align="center" />

ä»¥ä¸Šæ˜¯ [lishaoy.net](https://lishaoy.net) æ¸…é™¤ç¼“å­˜åçš„ **é¦–é¡µ** è¯·æ±‚é€Ÿåº¦ã€‚

å¯è§ï¼Œè¯·æ±‚æ—¶é—´æ˜¯ **4.59 s** ï¼Œæ€»è¯·æ±‚ä¸ªæ•° **51** ï¼Œ è€Œ `js` çš„è¯·æ±‚ä¸ªæ•°æ˜¯ **8** ï¼Œ`css` çš„è¯·æ±‚ä¸ªæ•°æ˜¯ **3** _ï¼ˆå…¶å®å°± all.css ä¸€ä¸ªï¼Œå…¶å®ƒ 2 ä¸ªæ˜¯ Googleæµè§ˆå™¨åŠ è½½çš„ï¼‰_ï¼Œ è€Œæ²¡ä½¿ç”¨ **å‹ç¼©ã€åˆå¹¶** æ—¶å€™ï¼Œè¯·æ±‚æ—¶é—´æ˜¯ **10** å¤šç§’ï¼Œæ€»è¯·æ±‚ä¸ªæ•°æœ‰ **70** å¤šä¸ªï¼Œ`js` çš„è¯·æ±‚ä¸ªæ•°æ˜¯ **20** å¤šä¸ª ï¼Œå¯¹æ¯”è¯·æ±‚æ—¶é—´ **æ€§èƒ½** æå‡ **1å€** å¤š

å¦‚å›¾ï¼š*æœ‰ç¼“å­˜ä¸‹çš„é¦–é¡µæ•ˆæœ*

<img src="https://cdn.lishaoy.net/webOptimize/concatJs2.png" alt="Netlity" width="100%" title="é¦–é¡µè¯·æ±‚é€Ÿåº¦ï¼ˆç¼“å­˜ï¼‰" align="center" />

åŸºæœ¬éƒ½æ˜¯ç§’å¼€ ğŸ˜

{% note warning %}
*Tipsï¼šåœ¨ `å‹ç¼©ã€åˆå¹¶` åï¼Œå•ä¸ªæ–‡ä»¶æ§åˆ¶åœ¨ 25 ~ 30 KBå·¦å³ï¼ŒåŒä¸€ä¸ªåŸŸä¸‹ï¼Œæœ€å¥½ä¸è¦å¤šäº5ä¸ªèµ„æº*
{% endnote %} 

#### å›¾ç‰‡å‹ç¼©ã€åˆå¹¶ 

ä¾‹å¦‚ï¼š`gulp` å›¾ç‰‡å‹ç¼©ä»£ç å¦‚ä¸‹ ğŸ‘‡

```javascript javascript https://lishaoy.net/webOptimize.html gulpfile.js
//å‹ç¼©image
gulp.task('imagemin', function () {
    gulp.src('./public/**/*.{png,jpg,gif,ico,jpeg}')
        .pipe(imagemin())
        .pipe(gulp.dest('./public'));
});
```

å›¾ç‰‡çš„åˆå¹¶å¯ä»¥é‡‡ç”¨ `CSS Spirite`ï¼Œæ–¹æ³•å°±æ˜¯æŠŠä¸€äº›å°å›¾ç”¨ `PS` åˆæˆä¸€å¼ å›¾ï¼Œç”¨ `css` å®šä½æ˜¾ç¤ºæ¯å¼ å›¾ç‰‡çš„ä½ç½®

```css css
.top_right .phone {
	background: url(../images/top_right.png) no-repeat 7px -17px;
	padding: 0 38px;
}

.top_right .help {
	background: url(../images/top_right.png) no-repeat 0 -47px;
	padding: 0 38px;
}
```

ç„¶åï¼ŒæŠŠ **å‹ç¼©** çš„å›¾ç‰‡æ”¾å…¥ `CDN` , ğŸ‘€ çœ‹çœ‹ï¼Œæ•ˆæœå¦‚ä½•

<img src="https://cdn.lishaoy.net/webOptimize/minImages.png" alt="Netlity" width="100%" title="é¦–é¡µè¯·æ±‚é€Ÿåº¦ï¼ˆimagesï¼‰" align="center" />

å¯è§ï¼Œè¯·æ±‚æ—¶é—´æ˜¯ **1.70 s** ,æ€»è¯·æ±‚ä¸ªæ•° **50** ï¼Œ è€Œ `img` çš„è¯·æ±‚ä¸ªæ•°æ˜¯ **15** _ï¼ˆè¿™é‡Œå› ä¸ºé¦–é¡µéƒ½æ˜¯å¤§å›¾ï¼Œå°±æ²¡æœ‰åˆå¹¶ï¼Œåªæ˜¯å‹ç¼©äº†ï¼‰_ ï¼Œä½†æ˜¯ï¼Œæ•ˆæœå¾ˆå¥½ ğŸ˜€ ï¼Œä» **4.59 s** ç¼©çŸ­åˆ° **1.70 s**, æ€§èƒ½åˆæå‡ä¸€å€ã€‚

å†çœ‹çœ‹æœ‰ç¼“å­˜æƒ…å†µå¦‚ä½• ğŸ˜

<img src="https://cdn.lishaoy.net/webOptimize/minImages1.png" alt="Netlity" width="100%" title="é¦–é¡µè¯·æ±‚é€Ÿåº¦ï¼ˆimages ç¼“å­˜ï¼‰" align="center" />

è¯·æ±‚æ—¶é—´æ˜¯ **1.05 s** ï¼Œæœ‰ç¼“å­˜å’Œæ— ç¼“å­˜åŸºæœ¬å·®ä¸å¤š

{% note warning %}
*Tipsï¼šå¤§çš„å›¾ç‰‡åœ¨ä¸åŒç»ˆç«¯ï¼Œåº”è¯¥ä½¿ç”¨ä¸åŒåˆ†è¾¨ç‡ï¼Œè€Œä¸åº”è¯¥ä½¿ç”¨ç¼©æ”¾ï¼ˆç™¾åˆ†æ¯”ï¼‰*
{% endnote %} 

æ•´ä¸ª **å‹ç¼©ã€åˆå¹¶** _ï¼ˆjsã€cssã€imgï¼‰_ å†æ”¾å…¥ `CDN` ï¼Œè¯·æ±‚æ—¶é—´ä» **10** å¤šç§’ ï¼Œåˆ°æœ€åçš„ **1.70 s** ï¼Œæ€§èƒ½æå‡ **5** å€å¤šï¼Œå¯è§ï¼Œè¿™ä¸ªæ“ä½œå¿…è¦æ€§ã€‚

### ç¼“å­˜

ç¼“å­˜ä¼šæ ¹æ®è¯·æ±‚ä¿å­˜è¾“å‡ºå†…å®¹çš„å‰¯æœ¬ï¼Œä¾‹å¦‚ **é¡µé¢ã€å›¾ç‰‡ã€æ–‡ä»¶**ï¼Œå½“ä¸‹ä¸€ä¸ªè¯·æ±‚æ¥åˆ°çš„æ—¶å€™:å¦‚æœæ˜¯ç›¸åŒçš„`URL`ï¼Œç¼“å­˜ç›´æ¥ä½¿ ç”¨æœ¬åœ°çš„å‰¯æœ¬å“åº”è®¿é—®è¯·æ±‚ï¼Œè€Œä¸æ˜¯å‘æºæœåŠ¡å™¨å†æ¬¡å‘é€è¯·æ±‚ã€‚å› æ­¤ï¼Œå¯ä»¥ä»ä»¥ä¸‹ **2** ä¸ªæ–¹é¢æå‡æ€§èƒ½ã€‚

- å‡å°‘ç›¸åº”å»¶è¿Ÿï¼Œæå‡ç›¸åº”æ—¶é—´
- å‡å°‘ç½‘ç»œå¸¦å®½æ¶ˆè€—ï¼ŒèŠ‚çœæµé‡

### æœªå®Œï¼Œå¾…ç»­ã€‚ã€‚ã€‚ ğŸ˜œ
